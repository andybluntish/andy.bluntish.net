{% macro list(entries, page, listClassNames, itemClassNames, linkClassNames, activeClassName = 'active') %}
<ul class="{{ listClassNames }}">
  {%- for entry in entries %}
    {# The current link is "active" #}
    {% if (entry.url == '/' and entry.url == page.url) or (entry.url != '/' and page.url.startsWith(entry.url)) %}
      {% set itemClasses = (itemClassNames + ' ' + activeClassName) | trim %}
      {% set linkClasses = (linkClassNames + ' ' + activeClassName) | trim %}
    {% else %}
      {% set itemClasses = itemClassNames | trim %}
      {% set linkClasses = linkClassNames | trim %}
    {% endif %}

    <li{% if itemClasses %} class="{{ itemClasses }}"{% endif %}>
      <a href="{{ entry.url }}"{% if linkClasses %} class="{{ linkClasses }}"{% endif %}>
        {{ entry.title }}
      </a>
    </li>
  {%- endfor %}
</ul>
{% endmacro %}
