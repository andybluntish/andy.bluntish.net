{% assign current_url_base = {{page.url | replace: 'index.html', '' | remove_first: '/' | split: '/' | first | prepend: '/' }} %}

<ul class="navigation-list">
  {% for nav_link in site.navigation %}
    {% if nav_link.url == current_url_base or (nav_link.url == '/' and current_url_base == '/page') %}
      {% assign current = true %}
    {% else %}
      {% assign current = false %}
    {% endif %}

    <li class="navigation-list__item{% if current %}--active{% endif %}">
      <a class="navigation-list__link{% if current %}--active{% endif %}" href="{{ nav_link.url | prepend: site.baseurl }}"{% if nav_link.rel %} rel="{{ nav_link.rel }}"{% endif %}>
        {{ nav_link.title | liquify | markdownify | strip_html | strip_newlines }}
      </a>
    </li>
  {% endfor %}
</ul>
